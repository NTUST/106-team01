<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>飲料吧 - 投票頁</title>
    <!-- Bootstrap -->
    <!-- 最新編譯和最佳化的 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!--jQuery-->
    <script src="jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
    <!-- 選擇性佈景主題 -->
    {% load static %}

    <link rel="stylesheet" type="text/css" href="{% static 'polls/css/style.css' %}" />
    <!--<link rel="stylesheet" href="CSS/style.css" />-->
</head>

<body>
    <h1>{{ question.question_text }}</h1>
    <div class="container">
        <table class="table table-bordered;" width="400px;">
            <tr>
                <td>排名</td>
                <td>名稱</td>
                <td>投票數</td>
            </tr>
            {% for choice in question.choice_set.all %}
            <tr>
                <td>{{ choice.id }}</td>
                <td>{{ choice.choice_text }}</td>
                <td>{{ choice.votes }}</td>
            </tr>

            {% endfor %}

        </table>
    </div>


    <div class="chart-container" style="position: relative; height:40vh; width:40vw">
        <canvas id="myChart"></canvas>
        <script>
            var canvas = document.getElementById('myChart');
            var data = {
                labels: ["{{store.0}}", "{{store.1}}", "{{store.2}}", "{{store.3}}", "{{store.4}}",
                    "{{store.5}}", "{{store.6}}", "{{store.7}}", "{{store.8}}", "{{store.9}}",
                ],
                datasets: [{
                    label: "drink avg price",
                    backgroundColor: "rgba(255,99,132,1)",
                    borderColor: "rgba(1,1,1,1)",
                    borderWidth: 1,
                    hoverBackgroundColor: "rgba(255,99,132,0.4)",
                    hoverBorderColor: "rgba(1,1,1,1)",
                    data: ["{{vote.0}}", "{{vote.1}}", "{{vote.2}}", "{{vote.3}}", "{{vote.4}}",
                        "{{vote.5}}", "{{vote.6}}", "{{vote.7}}", "{{vote.8}}", "{{vote.9}}",
                    ],
                }]
            };

            var option = {
                animation: {
                    duration: 5000
                }
            };

            var myBarChart = new Chart(canvas, {
                type: 'horizontalBar',
                data: data,
                options: option,
            });
        </script>
    </div>
</body>

</html>